// room script file


//ENTRADA
function hEntrada_Interact(Hotspot *theHotspot, CursorMode mode)
{
  if(gIr== 1){
    cPaxton.Say("No se abre.");
    
    cPaxton.Say("¿Pedimos ayuda?");
    cBarnes.Say("No.");
    cBarnes.Say("Hay una ventana.");
    cBarnes.Say("¿Cabes por ahí?");
    cPaxton.Say("¿Estás loca? ");
    
  } else{
  cBarnes.Say("Hermana Paxton recuerde que no podemos ");
  cBarnes.Say("abandonar el salón sin nuestros abrigos.");
  }
}

//Cerilla
function oCerilla_Interact(Object *theObject, CursorMode mode)
{
  oCerilla.Visible = false;
  cPaxton.AddInventory(iCerilla);
  cPaxton.Say("Con las cerillas ahora podemos encender la vela.");
}

function oCerilla_Look(Object *theObject, CursorMode mode)
{cPaxton.Say("Estas son las cerillas.");}


//Vela apagada
function oVelaApagada_Look(Object *theObject, CursorMode mode)
{
  cPaxton.Say("Es la vela que deberíamos encender con las cerillas.");
}
function oVelaApagada_UseInv(Object *theObject, CursorMode mode)
{
  if(player.ActiveInventory==iCerilla){
    cPaxton.LoseInventory(iCerilla);
    oVelaApagada.Visible=false;
    oVelaEncendida.SetPosition(oVelaApagada.X, oVelaApagada.Y);
    oVelaEncendida.Visible= true;
    //Al encender la vela aparece el sr Reed
    cPaxton.Say("La vela está encendida.");
    cSrReed.ChangeRoom(4, 47, 414, eDirectionDown);
    cSrReed.Say("Sentaos y tomad un par de sodas.");
    cSrReed.Walk(251, 478, eBlock);
    
    cBarnes.Walk(374, 506, eBlock);
    cPaxton.Walk(370, 462, eBlock);
    
    oBebida1.Visible = true;
    oBebida2.Visible = true;
    
    oCaja.Visible = true;
    oPapel.Visible = true;
    //en la mesa están la caja y el papel
    gMesa = 1;
    
    cPaxton.Say("Gracias.");
    cSrReed.Say("Mi esposa es tímida.");
    //El señor se va por la tarta
    Wait(10);
    cSrReed.Say("¿A qué huele?");
    Wait(5);
    cPaxton.Say("Huele a arándanos.");
    cBarnes.Say("Es un pastel de arándanos.");
    
    cSrReed.Say("Sí, pues creo que el pastel está listo.");
    cSrReed.Say("Voy a por el pastel.");
    
    cSrReed.Walk(57, 412, eBlock);
    cSrReed.ChangeRoom(3, 271, 454);
    
    cBarnes.Say("Hermana Paxton, mire la mesa.");
    
  } else{
    cPaxton.Say("Esto no va aquí.");
  }
}
//Vela encendida
function oVelaEncendida_Look(Object *theObject, CursorMode mode)
{
  cBarnes.Say("¿No te parece extraño ");
  cBarnes.Say("que cuanto más cerca estemos de la vela,");
  cBarnes.Say("el aroma de arándanos es más intenso? ");
  cPaxton.Say("Sí, es verdad.");
  cPaxton.Say("En la vela pone: ");
  cPaxton.Say("“Aromática casera Pastel de arándanos” ");
  cBarnes.Say("Nos ha engañado.");
  cPaxton.Say("Creo que deberíamos irnos.");
  cBarnes.Say("Sí.");
  
  cBarnes.Walk(581, 419, eBlock);
  cPaxton.Walk(488, 399, eBlock);
  
  cPaxton.Say("¿Qué pasa?");
  cBarnes.Say("Tiene nuestros abrigos ");
  cBarnes.Say("y la llave de la cerradura de las bicicletas está en mi bolsillo.");
  cPaxton.Say("Bueno, tendremos que ir caminando.");
  gIr = 1;
}
function oVelaEncendida_Interact(Object *theObject, CursorMode mode)
{
  cPaxton.Say("La vela ya está encendida.");
}
function oVelaEncendida_UseInv(Object *theObject, CursorMode mode)
{
 if(player.ActiveInventory == iPapel){
    cPaxton.Walk(oVelaEncendida.X, oVelaEncendida.Y, eBlock);
    cPaxton.FaceObject(oVelaEncendida);
    player.LoseInventory(iPapel);
    player.AddInventory(iPapelMensaje);
    cPaxton.Say("Ha aparecido unos números.");
  } else{
    cPaxton.Say("Esto no va aquí.");
  }
}

//Ventana
function hVentana_Look(Hotspot *theHotspot, CursorMode mode)
{
  cPaxton.Say("Es una ventana.");
}
function hVentana_Interact(Hotspot *theHotspot, CursorMode mode)
{
  cPaxton.Say("No se rompe.");
  cBarnes.Say("Deberíamos pedir ayuda.");
}

//Pasillo a la biblio
function hPasillo_Look(Hotspot *theHotspot, CursorMode mode)
{
  if(gIr ==1){
  cBarnes.Say("¿Sr. Reed? ");
  cPaxton.Say("...");
  }else{
    cPaxton.Say("Puerta al pasillo.");
  }
}

//cPaxton.ChangeRoom(2, 423, 312, eDirectionDown);
//cBarnes.ChangeRoom(2, 494, 315, eDirectionDown);

function hPasillo_Interact(Hotspot *theHotspot, CursorMode mode)
{
  cPaxton.Say("Está cerrada con llave.");
  cBarnes.Say("Busquemos en el salón. ");
}

//Caja
function oCaja_Look(Object *theObject, CursorMode mode)
{
  cPaxton.Walk(oCaja.X, oCaja.Y);
  cPaxton.FaceObject(oCaja);
  cPaxton.Say("En la cajita pone: “Llave de repuesto”. ");
}
function oCaja_Interact(Object *theObject, CursorMode mode)
{
  cPaxton.Walk(oCaja.X, oCaja.Y);
  cPaxton.FaceObject(oCaja);
  if(gSabenComb == 1){
    gCaja.Visible = true;
  }else{
    cPaxton.Say("No consigo abrirlo.");
    cPaxton.Say("Parece que hay que poner tres números en el correcto orden.");
    //Puzle activada
    gCajaActivada = true;
  }
}

//Papel
function oPapel_Look(Object *theObject, CursorMode mode)
{
  cPaxton.Say("Este papel parece tener una textura diferente a la de un papel normal. ");
  
  cBarnes.Say("Creo que he visto algo en el papel.");
  gPapel = 1;
}
function oPapel_Interact(Object *theObject, CursorMode mode)
{
  cPaxton.Walk(oPapel.X,  oPapel.Y);
  cPaxton.FaceObject(oPapel);
  oPapel.Visible = false;
  cPaxton.Say("Este papel parece tener una textura diferente a la de un papel normal. ");
  cBarnes.Say("Creo que he visto algo en el papel.");
  gPapel = 1;
  cPaxton.Say("Un papel.");
  cPaxton.AddInventory(iPapel);
}


//Caja abierta
function oCajaAbierta_Interact(Object *theObject, CursorMode mode)
{
  cPaxton.Say("Hay una llave.");
  cPaxton.Say("Esta llave se podría probar en las dos puertas. ");
  cPaxton.AddInventory(iLlave);
}
function oCajaAbierta_Look(Object *theObject, CursorMode mode)
{
  cPaxton.Say("Hay una llave.");
}

//ENTRADA y PASILLO
function hEntrada_UseInv(Hotspot *theHotspot, CursorMode mode)
{
  if(player.ActiveInventory == iLlave){
    cPaxton.Say("Es inútil, no funciona. ");
  }else{
    cPaxton.Say("Esto no va aquí.");
  }
}
function hEntrada_Look(Hotspot *theHotspot, CursorMode mode)
{
  cBarnes.Say("Hermana Paxton recuerde que no podemos ");
  cBarnes.Say("abandonar el salón sin nuestros abrigos.");
}

function hPasillo_UseInv(Hotspot *theHotspot, CursorMode mode)
{
  if(player.ActiveInventory == iLlave){
    gInv.Visible = false;
    cPaxton.Say("Funcionó!");
    cBarnes.Walk(95, 397, eBlock);
    cBarnes.Say("Vamos hermana Paxton, Dios está de nuestro lado. ");
    cPaxton.Say("Espera");
    cPaxton.Say("Dejamos las cosas aquí, no creo que lo vamos a necesitar");
    cPaxton.Say("Y además, no está bien llevarse las cosas de los demás");
    cPaxton.LoseInventory(iPapelMensaje);
    cPaxton.LoseInventory(iLlave);
    cPaxton.Say("Ahora sí, vámonos.");
    cPaxton.ChangeRoom(2, 863, 376);
    cBarnes.ChangeRoom(2, 906, 430);
  }else{
    cPaxton.Say("Esto no va aquí.");
  }
}

function room_FirstLoad()
{
  cPaxton.Walk(172, 381, eBlock);
  cPaxton.FaceObject(oCerilla);
  cPaxton.Say("Aquí están las cerillas");
}

//Bebidas
function oBebida2_AnyClick(Object *theObject, CursorMode mode)
{
 cPaxton.Say("Una bebida.");
}

function oBebida1_AnyClick(Object *theObject, CursorMode mode)
{
  cPaxton.Say("Una bebida.");
}

//Estrella
function oEstrella_AnyClick(Object *theObject, CursorMode mode)
{
  cPaxton.Say("Una figura de la estrella.");
}

//Virgen maría
function oVirgenMaria_AnyClick(Object *theObject, CursorMode mode)
{
  cPaxton.Say("Una figura de la Virgen María.");
}

//Luna
function oLuna_AnyClick(Object *theObject, CursorMode mode)
{
    cPaxton.Say("Una figura de la Luna.");
}
//Cuadros
function oCuadro1_AnyClick(Object *theObject, CursorMode mode)
{
  cPaxton.Say("Es un cuadro de una iglesia.");
}

function oCuadro2_AnyClick(Object *theObject, CursorMode mode)
{
  cPaxton.Say("Es un cuadro de una iglesia.");
}








