// room script file

//ENTRADA
function hEntrada_Interact(Hotspot *theHotspot, CursorMode mode)
{
  if(gIr== 1){
    cPaxton.Say("No se abre.");
    
    cPaxton.Say("¿Pedimos ayuda?");
    cBarnes.Say("No.");
    cBarnes.Say("Hay una ventana.");
    cBarnes.Say("¿Cabes por ahí?");
    cPaxton.Say("¿Estás loca? ");
    
  } else{
  cBarnes.Say("Hermana Paxton recuerde que no podemos ");
  cBarnes.Say("abandonar el salón sin nuestros abrigos.");
  }
}

//Cerilla
function oCerilla_PickUp(Object *theObject, CursorMode mode)
{
  oCerilla.Visible = false;
  cPaxton.AddInventory(iCerilla);
  cPaxton.Say("Con las cerillas ahora podemos encender la vela.");
}
function oCerilla_Look(Object *theObject, CursorMode mode)
{cPaxton.Say("Estas son las cerillas.");}


//Vela apagada
function oVelaApagada_UseInv(Object *theObject, CursorMode mode)
{
  if(player.ActiveInventory==iCerilla){
    oVelaApagada.Visible=false;
    oVelaEncendida.SetPosition(oVelaApagada.X, oVelaApagada.Y);
    oVelaEncendida.Visible= true;
    //Al encender la vela aparece el sr Reed
    cSrReed.ChangeRoom(2, 47, 414, eDirectionDown);
    cSrReed.Walk(251, 471, eBlock);
    cSrReed.Say("Sentaos y tomad un par de sodas.");
    oBebida1.Visible = true;
    oBebida2.Visible = true;
    
    oCaja.Visible = true;
    oPapel.Visible = true;
    //en la mesa están la caja y el papel
    gMesa = 1;
    
    cPaxton.Say("Gracias.");
    cSrReed.Say("Mi esposa es tímida.");
    //El señor se va por la tarta
    Wait(2);
    cSrReed.Say("¿A qué huele?");
    cPaxton.Say("Huele a arándanos.");
    cBarnes.Say("Es un pastel de arándanos.");
    
    cSrReed.Say("Sí, pues creo que el pastel está listo.");
    cSrReed.Say("Voy a por el pastel.");
    
    cSrReed.Walk(57, 412, eBlock);
    cSrReed.ChangeRoom(3);
    
    cBarnes.Say("Hermana Paxton mire la mesa.");
    
  } else{
    cPaxton.Say("Esto no va aquí.");
  }
}
//Vela encendida
function oVelaEncendida_Look(Object *theObject, CursorMode mode)
{
  cBarnes.Say("¿No te parece extraño ");
  cBarnes.Say("que cuanto más cerca estemos de la vela,");
  cBarnes.Say("el aroma de arándanos es más intenso? ");
  cPaxton.Say("Sí, es verdad.");
  cPaxton.Say("En la vela pone: ");
  cPaxton.Say("“Aromática casera Pastel de arándanos” ");
  cBarnes.Say("Nos ha engañado.");
  cPaxton.Say("Creo que deberíamos irnos.");
  cBarnes.Say("Sí.");
  
  cBarnes.Walk(581, 419, eBlock);
  cPaxton.Walk(488, 399, eBlock);
  
  cPaxton.Say("¿Qué pasa?");
  cBarnes.Say("Tiene nuestros abrigos ");
  cBarnes.Say("y la llave de la cerradura de las bicicletas está en mi bolsillo.");
  cPaxton.Say("Bueno, tendremos que ir caminando.");
  gIr = 1;
}
function oVelaEncendida_UseInv(Object *theObject, CursorMode mode)
{
 if(player.ActiveInventory == iPapel){
    player.LoseInventory(iPapel);
    player.AddInventory(iPapelMensaje);
    cPaxton.Say("Ha aparecido unos números.");
  } else{
    cPaxton.Say("Esto no va aquí.");
  }
}

//Ventana
function hVentana_Look(Hotspot *theHotspot, CursorMode mode)
{
  cPaxton.Say("Es una ventana.");
}
function hVentana_Interact(Hotspot *theHotspot, CursorMode mode)
{
  cPaxton.Say("No se rompe.");
  cBarnes.Say("Deberíamos pedir ayuda.");
}

//Pasillo a la biblio

function hPasillo_Look(Hotspot *theHotspot, CursorMode mode)
{
  cBarnes.Say("¿Sr. Reed? ");
  cPaxton.Say("...");
}

//cPaxton.ChangeRoom(2, 423, 312, eDirectionDown);
//cBarnes.ChangeRoom(2, 494, 315, eDirectionDown);

function hPasillo_Interact(Hotspot *theHotspot, CursorMode mode)
{
  cPaxton.Say("Está cerrada con llave.");
  cBarnes.Say("Busquemos en el salón. ");
}

//Caja
function oCaja_Look(Object *theObject, CursorMode mode)
{
  cPaxton.Say("En la cajita pone: “Llave de repuesto”. ");
}
function oCaja_Interact(Object *theObject, CursorMode mode)
{
  if(gSabenComb == 1){
    gCaja.Visible = true;
  }else{
    cPaxton.Say("No consigo abrirlo.");
    cPaxton.Say("Parece que hay que poner tres números en el correcto orden.");
    //Puzle activada
    gCajaActivada = true;
  }
}

//Papel

function oPapel_Look(Object *theObject, CursorMode mode)
{
  cPaxton.Say("Este papel parece tener una textura diferente a la de un papel normal. ");
  
  cBarnes.Say("Creo que he visto algo en el papel.");
  gPapel = 1;
}

function oPapel_PickUp(Object *theObject, CursorMode mode)
{
  oPapel.Visible = false;
  cPaxton.AddInventory(iPapel);
}
