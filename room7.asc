// room script file
function game_start (){
  System.Volume = 80;
  aZambolino___Spiritus_in_Me__freetouse_com__credits.Play();
  Wait(300); 
player.ChangeRoom(5);
 aZambolino___Spiritus_in_Me__freetouse_com__credits.Stop();
// Cambia a la room 5

}

// Room 7 - CRÉDITOS (código completo para room_AfterFadeIn)
// Función auxiliar para verificar si un string contiene otro
bool StringContains(String texto, String buscar)
{
  if (buscar.Length > texto.Length) return false;

  for (int i = 0; i <= texto.Length - buscar.Length; i++)
  {
    bool encontrado = true;

    for (int j = 0; j < buscar.Length; j++)
    {
      if (texto.Chars[i + j] != buscar.Chars[j])
      {
        encontrado = false;
        break;
      }
    }

    if (encontrado) return true;
  }

  return false;
}
function room_AfterFadeIn() 
{
  // Música
  game_start();
  // Variables
  int yPos = 480;
  int speed = 1;
  bool finished = false;
  int frames = 0;
  FontType myFont = eFontFont3;
  
  // Colores
  int colorTitle = 14;
  int colorCategory = 13;
  int colorWhite = 15;
  int colorGreen = 9;
  int colorGray = 7;
  int colorBlack = 0;
  
  // Array de créditos
  String credits[60];
  
  // Llenar el array con los créditos
  credits[0] = "CRÉDITOS";
  credits[1] = "";
  credits[2] = "MÚSICA";
  credits[3] = "";
  credits[4] = "Música Interiores";
  credits[5] = "por Andrés Mediavilla Rodríguez";
  credits[6] = "";
  credits[7] = "Castle";
  credits[8] = "por Walen";
  credits[9] = "Fuente: https://freetouse.com/music";
  credits[10] = "Música de fondo gratuita (No Copyright)";
  credits[11] = "";
  credits[12] = "Spiritus in Me";
  credits[13] = "por Zambolino";
  credits[14] = "Fuente: https://freetouse.com/music";
  credits[15] = "Música para videos (Descarga Gratuita)";
  credits[16] = "";
  credits[17] = "Dark atmosphere with rain";
  credits[18] = "por Milagros Gómez";
  credits[19] = "Fuente: https://pixabay.com/music";
  credits[20] = "";
  credits[21] = "";
  credits[22] = "EFECTOS DE SONIDO";
  credits[23] = "";
  credits[24] = "Place Holder Assets";
  credits[25] = "por Mayra";
  credits[26] = "";
  credits[27] = "";
  credits[28] = "SPRITES";
  credits[29] = "";
  credits[30] = "Luis Carlos Rodríguez Pérez";
  credits[31] = "Jacob Gabriel Núñez Marapacuto";
  credits[32] = "";
  credits[33] = "";
  credits[34] = "FONDOS";
  credits[35] = "";
  credits[36] = "Jacob Gabriel Núñez Marapacuto";
  credits[37] = "Luis Carlos Rodríguez Pérez";
  credits[38] = "Ángela Yuqiang Leal Gorrachategui";
  credits[39] = "";
  credits[40] = "";
  credits[41] = "PROGRAMACIÓN";
  credits[42] = "";
  credits[43] = "Ángela Yuqiang Leal Gorrachategui";
  credits[44] = "Jiale Lin";
  credits[45] = "Andrés Mediavilla Rodríguez";
  credits[46] = "Izan Huesca Gordo";
  credits[47] = "";
  credits[48] = "";
  credits[49] = "Gracias por jugar";
  credits[50] = "";
  credits[51] = "© 2024 Tu Estudio";
  credits[52] = "";
  credits[53] = "";
  
  int totalCredits = 54;
  
  // Bucle principal
  while (!finished) 
  {
    frames++;
    
    // Limpiar pantalla
    DrawingSurface *bg = Room.GetDrawingSurfaceForBackground();
    bg.DrawingColor = colorBlack;
    bg.DrawRectangle(0, 0, 640, 480);
    
    // Dibujar créditos
    int currentY = yPos;
    
    for (int i = 0; i < totalCredits; i++) 
    {
      if (currentY > -30 && currentY < 510 && credits[i] != "") 
      {
        // Determinar color
        int textColor = colorWhite;
        
        if (credits[i] == "CRÉDITOS" || credits[i] == "Gracias por jugar") 
        {
          textColor = colorTitle;
        }
        else if (credits[i] == "MÚSICA" || credits[i] == "EFECTOS DE SONIDO" || 
                 credits[i] == "SPRITES" || credits[i] == "FONDOS" || 
                 credits[i] == "PROGRAMACIÓN") 
        {
          textColor = colorCategory;
        }
        else if (StringContains(credits[i], "por ")) 
        {
          textColor = colorGreen;
        }
        else if (StringContains(credits[i], "Fuente:") || credits[i] == "© 2024 Tu Estudio") 
        {
          textColor = colorGray;
        }
        
        // Dibujar texto centrado
        bg.DrawingColor = textColor;
        bg.DrawStringWrapped(70, currentY, 500, myFont, eAlignCenter, credits[i]);
      }
      
      // Siguiente línea
      currentY += 30;
    }
    
    // Mensaje ESC para saltar
    if (frames > 90) 
    {
      bg.DrawingColor = colorBlack;
      bg.DrawRectangle(440, 450, 190, 25);
      
      if ((frames / 10) % 2 == 0) 
      {
        bg.DrawingColor = colorWhite;
        bg.DrawStringWrapped(440, 455, 190, myFont, eAlignCenter, "ESC para saltar");
      }
    }
    
    // Liberar superficie
bg.Release();

// Mover scroll
yPos -= speed;

// Verificar si salir
if (yPos < -2000 || IsKeyPressed(eKeyEscape) || IsKeyPressed(eKeySpace))
{
  finished = true;
}

// Pequeña pausa
Wait(1);
  }
  

  
FadeOut(10);
  // Ir al menú principal 
 player.ChangeRoom(5);
}

