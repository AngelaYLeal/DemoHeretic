// room script file
// Room_Final.asc - Exterior de la casa, noche



function FinalAlejarse()
{
    // Oscurecer pantalla gradualmente
    FadeOut(300);
    
    // Últimas líneas de diálogo durante el fade out
    cPaxton.Say("Otoño, 2025.");
    Wait(20);
    cPaxton.Say("Dos misioneras tocaron a la puerta...");
    Wait(20);
    cPaxton.Say("Solo una salió.");
    
   Wait(10);
   player.ChangeRoom(7);
}

function SecuenciaCamino()
{
    // 7. COMIENZA A CAMINAR POR LA CALLE
    cPaxton.Say("Tengo que ir a casa. Lejos de aquí.");
    
    // Animación de caminar lento, luego más rápido
    cPaxton.Walk(600, 250, eNoBlock, eAnywhere);
    Wait(60);
    
    // 8. SE DETIENE UNA ÚLTIMA VEZ
    cPaxton.StopMoving();
    cPaxton.FaceDirection(eDirectionLeft);
    
    cPaxton.Say("Que Dios te ampare, hermana.");
    Wait(120);
    cPaxton.Say("Y que me perdone a mí.");
    
    // 9. FINAL - SE ALEJA DEFINITIVAMENTE
    FinalAlejarse();
}


function DialogoInterno()
{
    // Cambiar color de texto para pensamientos
    int colorOriginal = cPaxton.SpeechColor;
    cPaxton.SpeechColor = 13; // Gris/plateado para pensamientos
    
    cPaxton.Say("Barnes todavía está ahí dentro...");
    Wait(100);
    
    cPaxton.Say("¿Pude haberla salvado?");
    Wait(100);
    
    cPaxton.Say("No,era imposible...");
    Wait(120);
    
    cPaxton.Say("Pero, ¿y si no?.");
    Wait(100);
    
    cPaxton.Say("Dios lo decidió así, así debe ser..., supongo...");
    Wait(100);
    
    // CONTINUAR SECUENCIA
    SecuenciaCamino();
}



function SecuenciaFinal()
{
    // 1. PAXTON SALE CORRIENDO DE LA CASA
    cPaxton.Walk(320, 250, eBlock, eAnywhere);
    
    // 2. SE DETIENE A MIRAR ATRÁS
    cPaxton.StopMoving();
    cPaxton.FaceDirection(eDirectionLeft); // Mira hacia la casa
    
    cPaxton.Say("¡Por fin he conseguido salir!");
    Wait(100);
    
    // 3. REACCIÓN FÍSICA (jadeando, recuperando el aliento)
    cPaxton.LockView(2); // View de cansancio/agitación
  
    // 4. MIRAR SUS MANOS (trauma)
    cPaxton.LockView(3); // View mirando sus manos
    cPaxton.Say("Esto en mis manos... no se irá nunca.");
    Wait(120);
    
    // 5. DECISIÓN FINAL
    cPaxton.LockView(1);
    cPaxton.FaceDirection(eDirectionRight); // Mira hacia la calle
    
    cPaxton.Say("Tengo que avisar a alguien...");
    Wait(80);
    cPaxton.Say("Pero... ¿quién me creerá?");
    Wait(80);
    
    // 6. DIÁLOGO INTERNO/MONÓLOGO
    DialogoInterno();
}
function room_AfterFadeIn()
{
    // Comenzar secuencia final
    SecuenciaFinal();
}
